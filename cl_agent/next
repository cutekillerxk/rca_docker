三可选增强中，agent返回在如果包含修复计划直接写入agent的回复中就行，不用单独显示，暂时不用添加确认执行的按钮。不用额外的功能了。六实现方式选择方式c,不过先完成模板库即可。七，计划格式JSON。计划生成时机，两者都支持。计划执行方式暂时不执行，只在agent的回复中显示，后续计划在用户确认后执行。

项目整体后续开发路线图
当前完成度：约 60%
已完成：
Detect 阶段：日志采集、监控指标采集
Diagnose 阶段：LLM 诊断分析
Act 阶段（部分）：Hadoop 操作工具（启动/停止/重启）
基础 UI：Gradio 界面、文档导出
缺失：
Plan 阶段：结构化修复计划生成
Verify 阶段：自动验证修复结果
完整工作流：Detect→Diagnose→Plan→Act→Verify 闭环
后续开发路线（分阶段）
阶段一：Plan 阶段实现（当前优先级最高）
目标：实现结构化修复计划生成
任务：
创建修复方案模板库（REPAIR_TEMPLATES）
常见故障类型：DataNode 下线、集群 ID 不匹配、磁盘满、NameNode 安全模式等
每个模板包含：步骤列表、参数说明、预期结果
实现 generate_repair_plan 工具
输入：故障类型、诊断信息
输出：JSON 格式修复计划
实现方式：基于模板库匹配 + LLM 填充参数
修改系统提示词
要求 Agent 在诊断后生成修复计划
计划格式：JSON，包含步骤、参数、预期结果
集成到 Agent 工具列表
将新工具添加到工具列表
支持诊断后自动生成或用户请求生成
预期时间：3-5 天
完成度提升：60% → 70%
阶段二：Verify 阶段实现
目标：修复后自动验证结果
任务：
实现 verify_repair_result 工具
检查集群状态（DataNode 数量、在线状态）
检查错误日志（关键错误是否消失）
检查监控指标（是否恢复正常）
返回验证结果（成功/失败/部分成功）
集成到修复流程
修复操作后自动调用验证
或在 Agent 系统提示中要求主动验证
定义验证标准
基于 VERIFY_CONFIG 配置
可配置的验证阈值
预期时间：2-3 天
完成度提升：70% → 80%
阶段三：Human-in-the-Loop 机制
目标：关键操作需要用户确认
任务：
定义危险操作列表
停止整个集群、清理元数据、格式化等
在 hadoop_auto_operation 中标记危险操作
实现确认机制
危险操作返回确认请求（JSON 格式）
Agent 在回复中明确标注需要确认
UI 层支持（可选）
检测确认请求，弹出确认对话框
用户确认后继续执行
预期时间：2-3 天
完成度提升：80% → 85%
阶段四：完整状态机流程
目标：实现 Detect→Diagnose→Plan→Act→Verify 自动化闭环
任务：
使用 LangGraph 或自定义状态机
定义状态：detect、diagnose、plan、act、verify
定义状态转换逻辑
实现状态转换
每个状态完成后自动进入下一状态
支持失败回退和重试机制
状态持久化
保存当前状态和上下文
支持中断后恢复
预期时间：1-2 周
完成度提升：85% → 95%
阶段五：知识库集成（可选）
目标：增强诊断和修复能力
任务：
启用知识库模块
取消注释知识库相关代码
修复 CUDA/FAISS 问题（如需要）
知识库内容
Hadoop 操作知识
常见故障解决方案
最佳实践文档
集成到 Agent
诊断时检索相关知识
生成计划时参考知识库
预期时间：3-5 天
完成度提升：95% → 98%
阶段六：高级功能（长期）
目标：提升系统能力和用户体验
任务：
计划执行跟踪
实时显示执行进度
记录每个步骤的执行结果
支持计划回滚
历史记录和审计
保存所有诊断和修复记录
支持查询历史操作
生成操作审计报告
多集群支持
支持管理多个 Hadoop 集群
集群配置管理
告警和通知
自动检测问题并告警
修复完成后通知
性能优化
日志读取优化
并发操作支持
缓存机制
预期时间：持续迭代
完成度提升：98% → 100%